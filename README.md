# AICUP 2024玉山人工智慧公開挑戰賽
全國第1
## **1. 基本資料**
### **1.1 競賽名稱**
- **RAG與LLM在金融問答的應用**

### **1.2 隊伍名稱**
- **TEAM_6939**

### **1.3 隊員名單**
1. 邱逸庭（隊長）
2. 楊仁瀚
3. 白宗翰

---

## **2. 程式碼說明**

### **2.1 架構**
本程式包含以下三個主要檔案：
1. **`preprocess.py`**
   - 位於 `Model` 資料夾內，負責文本與圖片的預處理。
   - 功能包括：
     - 提取 PDF 文本。
     - 提取圖片內的文字。

2. **`retrieval.py`**
   - 位於 `Model` 資料夾內，負責檢索邏輯。
   - 使用外部模型 `voyage-multilingual-2` 進行檢索。

3. **`main.py`**
   - 主程式。

---

### **2.2 邏輯**
1. **讀取問題**
   - 從 JSON 文件中讀取問題，根據 `category` 將問題分為三類：
     1. **`finance`**
     2. **`insurance`**
     3. **`faq`**

2. **預處理**
   - **文本提取**:
     - 使用 `pdfplumber` 和 `PyMuPDF` 從 PDF 中提取文本。
     - 將提取內容以字典形式保存。
   - **圖片文字提取**:
     - 使用 `easyocr` 從圖片中提取文字。
     - 特別針對：
       - `finance` 的財務報表。
       - `insurance` 的保單範例。

3. **檢索**
   - 使用 `VoyageAI` 平台提供的 `voyage-multilingual-2` 模型進行檢索排序。

4. **輸出答案**
   - 以 JSON 格式輸出結果，符合競賽要求。

---

## **3. 依賴項目安裝**
```pip install tqdm pdfplumber PyMuPDF easyocr pillow numpy tenacity voyageai ```
- 詳細版本請參考 `requirements.txt`。

---

## **4. Voyage-Multilingual-2 說明**

### **4.1 如何使用**
1. 前往 [Voyage AI 官方網站](https://docs.voyageai.com/docs/embeddings) 註冊帳號並取得 API Key。
2. 在 `main.py` 的 `api_key` 變數中填入您的 API Key。

### **4.2 模型介紹**
1. **使用模型的背景**
   - 比賽初期，我們嘗試以 `BM25` 模型進行檢索，並搭配：
     - 專有名詞字典擴充
     - 停用詞字典擴充
     - 詞幹提取
     - 同義詞替換
     - 繁體詞庫應用
     - 特殊符號處理
   - 但正確率始終無法突破 **85%**。
   - 依照初賽規則，我們改用深度學習模型進行檢索，經過多種外部模型測試，最終選擇 `voyage-multilingual-2`，並進行微調。

2. **相對於 BM25 的優勢**
   - **上下文語義匹配**:
     - `BM25` 基於詞頻與文檔頻率檢索，對語義匹配較弱。
     - `voyage-multilingual-2` 以深度學習技術捕捉語義關係，進行更準確的檢索。
   - **嵌入式向量檢索**:
     - `BM25` 仰賴分詞品質，易受分詞錯誤影響。
     - `voyage-multilingual-2` 使用嵌入向量檢索，不受分詞影響。

---

## **5. 補充**
   - 本組沒有額外大型資料集或大型模型存放於其他位置。
   - 所有必要文件與模型均包含在Github中，便於重現。

